<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BS/04 · Bayes’ Billiard Ball and the Beta–Binomial Model</title>
  <meta name="author" content="Arif Dönmez" />

  <style>
    /* -------------------------
       Font: Karrik (local)
    --------------------------*/
    @font-face{ font-family:"Karrik"; src:url("./Karrik-Regular.woff2") format("woff2"); font-weight:400; font-style:normal; font-display:swap; }
    @font-face{ font-family:"Karrik"; src:url("./Karrik-Italic.woff2") format("woff2"); font-weight:400; font-style:italic; font-display:swap; }

    /* -------------------------
       Font: Fira Sans (local)
    --------------------------*/
    @font-face{font-family:"Fira Sans";src:url("./FiraSans-Regular.ttf") format("truetype");font-weight:400;font-style:normal;font-display:swap;}
    @font-face{font-family:"Fira Sans";src:url("./FiraSans-Italic.ttf") format("truetype");font-weight:400;font-style:italic;font-display:swap;}
    @font-face{font-family:"Fira Sans";src:url("./FiraSans-Medium.ttf") format("truetype");font-weight:500;font-style:normal;font-display:swap;}
    @font-face{font-family:"Fira Sans";src:url("./FiraSans-MediumItalic.ttf") format("truetype");font-weight:500;font-style:italic;font-display:swap;}
    @font-face{font-family:"Fira Sans";src:url("./FiraSans-Light.ttf") format("truetype");font-weight:300;font-style:normal;font-display:swap;}
    @font-face{font-family:"Fira Sans";src:url("./FiraSans-LightItalic.ttf") format("truetype");font-weight:300;font-style:italic;font-display:swap;}

    @font-face{font-family:"Fira Sans-Italic";src:url("./FiraSans-Italic.ttf") format("truetype");font-weight:400;font-style:normal;font-display:swap;}

    /* -------------------------
       THEME ARCHITECTURE (your site vars)
    --------------------------*/
    :root {
      /* LIGHT THEME (Default) */
      --bg: #f6f7f8;
      --card-bg: #ffffff;
      --ink: #1b1b1b;
      --ink-secondary: rgba(0,0,0,0.82);
      --muted: #dcdfe3;
      --shadow: 0 12px 30px rgba(0,0,0,0.12);
      --link-border: rgba(0,0,0,0.25);
      --link-dotted: rgba(0,0,0,0.3);

      /* Template sizing */
      --pageW: 920px;
      --pagePadX: 48px;
      --pagePadY: 44px;

      /* hairlines like the screenshot */
      --hair: rgba(0,0,0,.18);
      --hair2: rgba(0,0,0,.12);
    }

    [data-theme="dark"] {
      --bg: #0f1113;
      --card-bg: #171a1d;
      --ink: #f2f5f7;
      --ink-secondary: rgba(255,255,255,0.82);
      --muted: #2b2f35;
      --shadow: 0 14px 36px rgba(0,0,0,0.5);
      --link-border: rgba(255,255,255,0.25);
      --link-dotted: rgba(255,255,255,0.35);

      --hair: rgba(255,255,255,.22);
      --hair2: rgba(255,255,255,.14);
    }

    @media (prefers-color-scheme: dark) {
      [data-theme="auto"] {
        --bg: #0f1113;
        --card-bg: #171a1d;
        --ink: #f2f5f7;
        --ink-secondary: rgba(255,255,255,0.82);
        --muted: #2b2f35;
        --shadow: 0 14px 36px rgba(0,0,0,0.5);
        --link-border: rgba(255,255,255,0.25);
        --link-dotted: rgba(255,255,255,0.35);

        --hair: rgba(255,255,255,.22);
        --hair2: rgba(255,255,255,.14);
      }
    }

    /* Base */
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background: var(--bg);
      color: var(--ink);
      font-family: "Fira Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
      transition: color .3s ease, background-color .3s ease;
    }

    a{
      color: inherit;
      text-decoration: none;
      border-bottom: 1px solid var(--link-border);
      transition: border-color .25s ease, color .25s ease, opacity .25s ease;
    }
    a:hover{
      border-bottom-color: var(--ink);
      opacity: .92;
    }

    /* Canvas + centered page */
    .wrap{
      min-height: 100%;
      display: grid;
      place-items: start center;
      padding: 22px 18px 60px;
    }

    .page{
      width: min(var(--pageW), 100%);
      background: var(--card-bg);
      border-left: 1px solid var(--hair);
      border-right: 1px solid var(--hair);
      padding: 18px var(--pagePadX) var(--pagePadY);
      transition: background-color .3s ease;
    }

    /* Top meta area (Karrik like your bar/nav) */
    .meta{
      font-family: "Karrik","Fira Sans",system-ui;
      font-size: 14px;
      color: var(--ink-secondary);
      letter-spacing: .1px;
    }

    .meta-row{
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      padding: 6px 0;
      border-bottom: 1px solid var(--hair2);
    }

    .meta-left{
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      align-items: baseline;
    }

    .meta-left .crumb::before{
      content: "→ ";
      opacity: .6;
    }

    .meta-right{
      white-space: nowrap;
      opacity: .75;
    }

    /* Title block (Karrik) */
    header{
      padding: 42px 0 26px;
      text-align: center;
    }

    h1{
      font-family: "Karrik", ui-serif, Georgia, serif;
      font-weight: 400;
      letter-spacing: .2px;
    }

    .divider{
      height: 1px;
      background: var(--hair2);
      margin: 26px 0 0;
    }

    /* Article columns */
    article{ padding-top: 34px; }

    .cols{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 46px;
      align-items: start;
    }

    p{
      margin: 0 0 14px;
      max-width: 62ch;
      font-family: inherit;
      font-weight: 300;
      font-size: 18px;
      line-height: 1.65;
      text-align: justify;
      text-justify: inter-word;
      hyphens: auto;
      color: color-mix(in srgb, var(--ink) 88%, transparent);
    }

    /* Editorial list — en-dash marker */
    ul.bullets{
      margin: 0 0 14px;
      padding-left: 0;
      list-style: none;
    }

    ul.bullets li{
      position: relative;
      padding-left: 1.2em;
      font-family: inherit;
      font-weight: 300;
      font-size: 18px;
      line-height: 1.65;
      color: color-mix(in srgb, var(--ink) 88%, transparent);
      text-align: left;
      hyphens: auto;
      margin: 0 0 10px;
    }

    ul.bullets li::before{
      content: "–";
      position: absolute;
      left: 0;
      top: 0;
      opacity: .6;
    }

    @media (max-width: 720px){
      ul.bullets li{ font-size: 17.5px; }
    }

    .lead{
      font-style: italic;
      font-weight: 300;
      text-align: left;
    }

    .lead.section {
      font-style: normal;
      font-weight: 400;
    }

    .indent{ text-indent: 2.2em; }
    .smallgap{ margin-bottom: 10px; }
    .spacer{ height: 18px; }

    .end-marker{
      grid-column: 1 / -1;
      text-align: center;
      margin-top: 26px;
      font-size: 18px;
      opacity: .35;
    }

    /* Optional: Mermaid block (kept minimal, fits your template) */
    .mermaid{
      grid-column: 1 / -1;
      margin: 6px 0 0;
      padding: 14px 16px;
      border: 1px solid var(--hair2);
      border-radius: 10px;
      background: color-mix(in srgb, var(--card-bg) 92%, transparent);
    }
    .mermaid svg{ max-width: 100%; height: auto; }

    /* Mermaid should inherit site typography */
    .mermaid, .mermaid svg{
    font-family: "Fira Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial !important;
    }

    .mermaid text{
      font-family: "Fira Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial !important;
      font-weight: 400;
    }

    .mermaid .node rect,
    .mermaid .node polygon,
    .mermaid .node ellipse{
    rx: 10px; ry: 10px; /* slightly softer corners */
    }

    .figure{
    grid-column: 1 / -1;   /* span both columns */
    margin-top: 10px;
    }

    .figcaption{
    margin-top: 10px;
    font-size: 14px;
    line-height: 1.55;
    color: var(--ink-secondary);
    opacity: .9;
    text-align: left;
    }

    .figcaption strong{
    font-family: "Karrik","Fira Sans",system-ui;
    font-weight: 400;
    }

    /* Display equations */
    mjx-container[display="true"]{
      font-size: 80% !important;
    }

    /* Inline math */
    mjx-container:not([display="true"]){
      font-size: 100% !important;
    }    

    /* Mobile */
    @media (max-width: 720px){
      :root{
        --pagePadX: 22px;
        --pagePadY: 34px;
      }
      header{ padding: 34px 0 18px; }
      .cols{ grid-template-columns: 1fr; gap: 0; }
      p{ font-size: 0.98rem; max-width: 56ch; }

      /* Display equations */
      mjx-container[display="true"]{
        font-size: 100% !important;
      }

      /* Inline math */
      mjx-container:not([display="true"]){
        font-size: 100% !important;
      } 

    }

    @media (max-width: 380px){
      .meta{ font-size: 13px; }
      p{ font-size: 0.965rem; }

      /* Display equations */
      mjx-container[display="true"]{
        font-size: 100% !important;
      }

      /* Inline math */
      mjx-container:not([display="true"]){
        font-size: 100% !important;
      }       
    }

    @media (max-width: 720px){
      .wrap{ padding: 0; }
      .page{
        width: 100%;
        padding-left: 14px;
        padding-right: 14px;
        padding-top: 14px;
        padding-bottom: max(16px, env(safe-area-inset-bottom));
        border-left: none;
        border-right: none;
        border-radius: 0;
        box-shadow: none;
      }
      p{
        font-size: 17.5px;
        max-width: none;
        text-align: left;
      }
    }

    .widget{
      grid-column: 1 / -1;
      border: 1px solid var(--hair2);
      border-radius: 12px;
      padding: 14px;
      background: color-mix(in srgb, var(--card-bg) 96%, transparent);
    }
    .controls{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 10px;
      font-family: "Fira Sans-Italic","Karrik","Fira Sans",system-ui;
      color: var(--ink-secondary);
      font-size: 13px;
    }
    .controls label{ display:block; margin-bottom: 6px; opacity: .9; }
    .controls input[type="range"]{ width: 100%; }
    .readout{ opacity: .85; }
    @media (max-width:720px){ .controls{ grid-template-columns: 1fr; } }   
  </style>

  <script>
  window.MathJax = {
    tex: {
      inlineMath: [['\\(', '\\)'], ['$', '$']],
      displayMath: [['\\[', '\\]'], ['$$', '$$']],
      processEscapes: true
    },
    output: { font: "mathjax-fira" },
    startup: { typeset: false }
  };
  </script>

  <script type="text/javascript" id="MathJax-script" async=""
    src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>

</head>

<script>
  (function() {
    const local = localStorage.getItem('site-theme');
    const attr = local || 'auto';
    document.documentElement.setAttribute('data-theme', attr);
  })();
</script>

<body>
  <div class="wrap">
    <main class="page">

      <!-- Top meta -->
      <div class="meta" aria-label="Top metadata">
        <div class="meta-row">
          <div class="meta-left">
            <span class="crumb"><a href="../index.html">Dr. Arif Dönmez</a></span>
            <span class="crumb"><a href="./index.html">Notes</a></span>
            <span class="crumb">BS/04</span>
          </div>
          <div class="meta-right">February 2026</div>
        </div>

        <div class="meta-row" style="border-bottom-color: var(--hair);">
          <div class="meta-left">
            <span class="crumb">Classic Example</span>
            <span class="crumb">Beta–Binomial</span>
          </div>
          <div class="meta-right">v0.1</div>
        </div>
      </div>


      <!-- Title -->
      <header>
        <h1>Bayes’ Billiard Ball and the Beta–Binomial Model</h1>
        <div class="divider" role="presentation"></div>
      </header>



      <!-- Content -->
      <article>
        <div class="cols">

          <!-- LEFT COLUMN -->
          <section>
            <p class="lead">
              The Beta distribution is the canonical way to represent uncertainty about an unknown proportion
              \(p\in[0,1]\). Its classic motivation goes back to Thomas Bayes (1764) and his “billiard ball”
              thought experiment—what we now call the Beta–Binomial model.
            </p>

            <div class="spacer"></div>

            <p class="lead section">1) The billiard ball experiment (Bayes, 1764)</p>
            <p class="indent">
              A ball \(W\) is placed uniformly at random on a line segment of length 1. Its position is \(p\),
              i.e. we assume \(p\sim \mathrm{Unif}(0,1)\). A second ball \(O\) is then rolled \(n\) times under the same
              assumptions. Let \(X\) be the number of times \(O\) stops to the left of \(W\).
            </p>

            <p class="indent">
              Bayes’ question:
              <em>Given \(X=x\), what can we infer about \(p\)?</em>
              In modern terms:
              <em>What is the posterior distribution of \(p\) given \(X=x\), under a uniform prior and a binomial likelihood?</em>
            </p>

            <div class="spacer"></div>

            <p class="lead section">2) Likelihood: binomial sampling</p>
            <p class="indent">
              Under \(X\mid p \sim \mathrm{Binomial}(n,p)\),
            </p>

            <p class="indent">
              \[
                P(X=x\mid p)=\binom{n}{x}p^x(1-p)^{n-x}.
              \]
            </p>

            <p class="indent">
              Treating this as a function of \(p\) (with \(x\) fixed) gives the likelihood \(\ell(p\mid x)\).
            </p>

            <div class="spacer"></div>

            <p class="lead section">3) Joint probability as an integral</p>
            <p class="indent">
              Bayes frames the update via probabilities of the form \(P(a&lt;p&lt;b\mid X=x)\). Start from
            </p>

            <p class="indent">
              \[
                P(a&lt;p&lt;b \ \text{and}\ X=x)
                =\int_a^b \binom{n}{x}p^x(1-p)^{n-x}\,dp.
              \]
            </p>
          </section>

          <!-- RIGHT COLUMN -->
          <section>
            <p class="lead section">4) Normalization: \(P(X=x)\)</p>
            <p class="indent">
              The marginal probability of the observation is
            </p>

            <p class="indent">
              \[
                P(X=x)=\int_0^1 \binom{n}{x}p^x(1-p)^{n-x}\,dp.
              \]
            </p>

            <p class="indent">
              Hence
            </p>

            <p class="indent">
              \[
                P(a&lt;p&lt;b\mid X=x)
                =
                \frac{\int_a^b \binom{n}{x}p^x(1-p)^{n-x}\,dp}{
                      \int_0^1 \binom{n}{x}p^x(1-p)^{n-x}\,dp }.
              \]
            </p>

            <p class="indent">
              The binomial coefficient cancels. The denominator becomes the Euler integral (the Beta function):
            </p>

            <p class="indent">
              \[
                B(x+1,n-x+1)=\int_0^1 p^x(1-p)^{n-x}\,dp.
              \]
            </p>

            <div class="spacer"></div>

            <p class="lead section">5) Conclusion: the posterior is Beta</p>
            <p class="indent">
              Therefore,
            </p>

            <p class="indent">
              \[
                P(a&lt;p&lt;b\mid X=x)=
                \frac{1}{B(x+1,n-x+1)}\int_a^b p^x(1-p)^{n-x}\,dp,
              \]
            </p>

            <p class="indent">
              which is exactly the CDF of a Beta distribution. Equivalently,
            </p>

            <p class="indent">
              \[
                p\mid X=x \sim \mathrm{Beta}(x+1,\ n-x+1).
              \]
            </p>

            <p class="indent">
              <em>Intuition:</em> the posterior mean is
              \[
                \mathbb{E}[p\mid x]=\frac{x+1}{n+2},
              \]
              i.e. a slightly regularized version of the empirical proportion \(x/n\):
              it shrinks extreme values toward \(1/2\) when \(n\) is small.
            </p>            

            <div class="spacer"></div>

          </section>

            <figure class="figure widget">
              <div class="controls">
                <div>
                  <label for="nSlider">n (number of trials)</label>
                  <input id="nSlider" type="range" min="1" max="200" step="1" value="20">
                  <div class="readout">n = <span id="nVal">20</span></div>
                </div>
                <div>
                  <label for="xSlider">x (count left of W)</label>
                  <input id="xSlider" type="range" min="0" max="20" step="1" value="8">
                  <div class="readout">x = <span id="xVal">8</span></div>
                </div>
              </div>

              <div id="betaPlot" style="width:100%; height:360px;"></div>

              <figcaption class="figcaption">
                <strong>Figure 1.</strong> Interactive posterior \(p\mid x \sim \mathrm{Beta}(x+1,n-x+1)\) under a \(\mathrm{Unif}(0,1)\) prior.
                Move the sliders to see how sample size controls concentration and how \(x/n\) shifts the posterior.
              </figcaption>
            </figure>

          <div class="end-marker">—</div>
        </div>
      </article>



    </main>
  </div>
<script src="https://cdn.jsdelivr.net/npm/plotly.js-dist-min@2.35.2/plotly.min.js"></script>
<script>
(function(){
  // --- log-gamma via Lanczos approximation (stable enough for our ranges) ---
  function logGamma(z){
    const p = [
      676.5203681218851, -1259.1392167224028, 771.32342877765313,
      -176.61502916214059, 12.507343278686905, -0.13857109526572012,
      9.9843695780195716e-6, 1.5056327351493116e-7
    ];
    if(z < 0.5){
      return Math.log(Math.PI) - Math.log(Math.sin(Math.PI*z)) - logGamma(1 - z);
    }
    z -= 1;
    let x = 0.99999999999980993;
    for(let i=0;i<p.length;i++) x += p[i]/(z+i+1);
    const t = z + p.length - 0.5;
    return 0.5*Math.log(2*Math.PI) + (z+0.5)*Math.log(t) - t + Math.log(x);
  }
  function logBeta(a,b){ return logGamma(a) + logGamma(b) - logGamma(a+b); }

  function betaPdf(p,a,b){
    if(p<=0 || p>=1) return 0;
    const lp = (a-1)*Math.log(p) + (b-1)*Math.log(1-p) - logBeta(a,b);
    return Math.exp(lp);
  }

  const nSlider = document.getElementById("nSlider");
  const xSlider = document.getElementById("xSlider");
  const nVal = document.getElementById("nVal");
  const xVal = document.getElementById("xVal");

  function updateXMax(){
    const n = parseInt(nSlider.value, 10);
    xSlider.max = String(n);
    if(parseInt(xSlider.value,10) > n) xSlider.value = String(n);
  }

  function render(){
    const n = parseInt(nSlider.value, 10);
    const x = parseInt(xSlider.value, 10);
    nVal.textContent = n;
    xVal.textContent = x;

    const a = x + 1;
    const b = (n - x) + 1;

    const xs = [];
    const ys = [];
    const steps = 400;
    for(let i=1;i<steps;i++){
      const p = i/steps;   // (0,1)
      xs.push(p);
      ys.push(betaPdf(p,a,b));
    }

    const trace = { x: xs, y: ys, mode: "lines", name: `Beta(${a},${b})` };

    const layout = {
      margin: {l: 45, r: 15, t: 20, b: 40},
      xaxis: { title: "p", range: [0,1] },
      yaxis: { title: "density" },
      paper_bgcolor: "rgba(0,0,0,0)",
      plot_bgcolor: "rgba(0,0,0,0)",
      font: { family: `"Fira Sans-Italic", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial`, size: 13 }
    };

    Plotly.react("betaPlot", [trace], layout, {displayModeBar: false, responsive: true});
  }

  nSlider.addEventListener("input", () => { updateXMax(); render(); });
  xSlider.addEventListener("input", render);

  updateXMax();
  render();
})();
</script>
<script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

const root = document.documentElement;
const themeAttr = root.getAttribute("data-theme") || "auto";
const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;

const isDark =
    themeAttr === "dark" ||
    (themeAttr === "auto" && prefersDark);

// Pull your CSS variables so Mermaid truly matches your palette
const css = getComputedStyle(root);
const bg        = css.getPropertyValue("--card-bg").trim() || "#171a1d";
const ink       = css.getPropertyValue("--ink").trim() || "#f2f5f7";
const ink2      = css.getPropertyValue("--ink-secondary").trim() || "rgba(255,255,255,0.82)";
const hair2     = css.getPropertyValue("--hair2").trim() || "rgba(255,255,255,.14)";

mermaid.initialize({
    startOnLoad: true,
    securityLevel: "strict",
    theme: "base",
    flowchart: { htmlLabels: true },
    themeVariables: {
    fontFamily: `"Fira Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial`,
    fontSize: "14px",

    /* canvas */
    background: "transparent",

    /* nodes */
    primaryColor: bg,
    primaryTextColor: ink,
    primaryBorderColor: hair2,

    secondaryColor: bg,
    secondaryTextColor: ink,
    secondaryBorderColor: hair2,

    tertiaryColor: bg,
    tertiaryTextColor: ink,
    tertiaryBorderColor: hair2,

    /* lines/arrows */
    lineColor: hair2,

    /* labels */
    labelTextColor: ink2,

    /* subtle differences for dark/light (optional tweaks) */
    darkMode: isDark
    }
});
</script>
<script>
  // If you ever change data-theme dynamically, call this:
  window.reRenderMermaid = async function () {
    if (window.mermaid && window.mermaid.run) {
      await window.mermaid.run({ querySelector: ".mermaid" });
    }
  };
</script>
  <!-- MathJax typeset -->
  <script>
  window.addEventListener('load', () => {
    if (window.MathJax && window.MathJax.typesetPromise) {
      MathJax.typesetPromise([document.body]).catch((err) => {
        console.error('MathJax typeset failed:', err);
      });
    }
  });
  </script>
</body>
</html>